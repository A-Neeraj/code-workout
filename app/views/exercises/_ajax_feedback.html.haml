%h2 Feedback
- attempt = nil
- attempts = Attempt.where(user_id: current_user.id,exercise_id: @exercise.id)
- if attempts.any?
  - attempt = attempts.last
  - if @exercise.base_exercise.question_type == 1
    = Choice.find(attempt.answer.to_i).feedback
  - elsif @exercise.base_exercise.question_type == 2
    %table.table.table-striped.feedback
      %thead
        %tr
          %th Behavior
          %th Result
      %tbody
        - @exercise.coding_question.test_cases.each_with_index do |test_case, i|
          %tr
            %td
              - tcr = TestCaseResult.all.order('id desc').                    |
                find_by(test_case_id: test_case.id, user_id: current_user.id) |
              - if tcr.execution_feedback.include?("CODE-ERROR-CODE-ERROR")
                CODE EXECUTION ERROR
                = tcr.execution_feedback
                - break
              = test_case.description
              - if !tcr.pass
                %br
                .out= tcr.execution_feedback
            - if tcr.pass
              %td.pass
                %i.fa.fa-check-square
            - else
              %td.fail
                %i.fa.fa-minus-square
  - if session[:current_workout] && params[:wexes].nil?
    = link_to 'Finish workout',
      workout_evaluate_path(uid: current_user.id,
        wid: session[:current_workout])
  - elsif session[:current_workout] && params[:wexes][1..-1].count >= 0
    = button_to 'Next question',
      exercise_practice_path(id: params[:wexes].first,
        wexes: params[:wexes][1..-1]),
      method: :get
